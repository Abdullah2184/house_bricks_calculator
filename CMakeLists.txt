cmake_minimum_required(VERSION 3.22)

# FIX: This line tells CMake to treat all dependencies as if they require 
# at least version 3.5, which stops the error you're seeing.
set(CMAKE_POLICY_VERSION_MINIMUM 3.5)

project(house_bricks_calculator)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)

# 1. We switch to the newer 0.8.0 version 
FetchContent_Declare(
    yaml-cpp
    GIT_REPOSITORY https://github.com/jbeder/yaml-cpp.git
    GIT_TAG 0.8.0
)
FetchContent_MakeAvailable(yaml-cpp)

# 2. Add your source files
add_executable(calcbricks
    main.cpp
    HouseClass.cpp
)

# 3. Link correctly
# Note: Use 'yaml-cpp' here to match the target name generated by the library
target_link_libraries(calcbricks PRIVATE yaml-cpp)